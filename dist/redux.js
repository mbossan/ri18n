"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.selectors=exports.reducer=exports.actions=undefined;var _createReducer;exports.setReducerName=setReducerName;var _reduxAct=require("redux-act");var _seamlessImmutable=require("seamless-immutable");var _seamlessImmutable2=_interopRequireDefault(_seamlessImmutable);var _pluralize=require("./pluralize");var _pluralize2=_interopRequireDefault(_pluralize);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var reducerName="rxi18n";function setReducerName(name){reducerName=name}var initialState={lang:"",translations:{}};var immutableState=(0,_seamlessImmutable2.default)(initialState);var actions=exports.actions={setLang:(0,_reduxAct.createAction)("ri18nSetLang",function(lang){return{lang:lang}}),addTranslations:(0,_reduxAct.createAction)("ri18nAddTranslations",function(lang,translations){return{lang:lang,translations:translations}}),reset:(0,_reduxAct.createAction)("ri18nReset")};var reducer=exports.reducer=(0,_reduxAct.createReducer)((_createReducer={},_defineProperty(_createReducer,actions.setLang,function(state,_ref){var lang=_ref.lang;return state.merge({lang:lang})}),_defineProperty(_createReducer,actions.addTranslations,function(state,_ref2){var lang=_ref2.lang,translations=_ref2.translations;return state.setIn(["translations",lang],translations)}),_defineProperty(_createReducer,actions.reset,function(state){return state.merge(initialState)}),_createReducer),immutableState);var root=function root(state){return state[reducerName]};var lang=function lang(state){return root(state).lang};var translations=function translations(state){return isLangAvailable(state,lang(state))?root(state).translations[lang(state)]:{}};var isLangAvailable=function isLangAvailable(state,id){return root(state).translations&&Object.keys(root(state).translations).includes(id)};var t=function t(state,_ref3){var key=_ref3.key,replacements=_ref3.replacements,number=_ref3.number;var langKey=lang(state);if(!isLangAvailable(state,langKey)){console.warn("[ri18n] Missing","["+langKey+"] in translation object");return key}var val=(0,_pluralize2.default)(key,translations(state)[key],replacements,number);if(val===false){console.warn("[ri18n] Missing","["+langKey+"]","translation for key",key);return key}return val};var selectors=exports.selectors={lang:lang,translations:translations,isLangAvailable:isLangAvailable,t:t};exports.default={actions:actions,reducer:reducer,selectors:selectors,setReducerName:setReducerName};